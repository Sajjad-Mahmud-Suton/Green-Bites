<?php
/**
 * ╔═══════════════════════════════════════════════════════════════════════════╗
 * ║                                                                           ║
 * ║   ██████╗ ██████╗ ███████╗███████╗███╗   ██╗    ██████╗ ██╗████████╗███████╗║
 * ║  ██╔════╝ ██╔══██╗██╔════╝██╔════╝████╗  ██║    ██╔══██╗██║╚══██╔══╝██╔════╝║
 * ║  ██║  ███╗██████╔╝█████╗  █████╗  ██╔██╗ ██║    ██████╔╝██║   ██║   █████╗  ║
 * ║  ██║   ██║██╔══██╗██╔══╝  ██╔══╝  ██║╚██╗██║    ██╔══██╗██║   ██║   ██╔══╝  ║
 * ║  ╚██████╔╝██║  ██║███████╗███████╗██║ ╚████║    ██████╔╝██║   ██║   ███████╗║
 * ║   ╚═════╝ ╚═╝  ╚═╝╚══════╝╚══════╝╚═╝  ╚═══╝    ╚═════╝ ╚═╝   ╚═╝   ╚══════╝║
 * ║                                                                           ║
 * ╠═══════════════════════════════════════════════════════════════════════════╣
 * ║  FILE: bootstrap.php                                                      ║
 * ║  PATH: /src/config/bootstrap.php                                          ║
 * ║  DESCRIPTION: Application bootstrap - loads all required configurations  ║
 * ╠═══════════════════════════════════════════════════════════════════════════╣
 * ║  USAGE: Include this ONE file to get everything loaded                    ║
 * ║         require_once __DIR__ . '/src/config/bootstrap.php';               ║
 * ╠═══════════════════════════════════════════════════════════════════════════╣
 * ║  LOADS:                                                                   ║
 * ║    1. Path Configuration (paths.php)                                      ║
 * ║    2. Security Configuration (security.php)                               ║
 * ║    3. Database Connection (db.php)                                        ║
 * ╠═══════════════════════════════════════════════════════════════════════════╣
 * ║  (c) 2024 Green Bites - University Canteen Management System              ║
 * ╚═══════════════════════════════════════════════════════════════════════════╝
 */


/* ═══════════════════════════════════════════════════════════════════════════
   STEP 1: LOAD PATH CONFIGURATION
   ═══════════════════════════════════════════════════════════════════════════ */

require_once __DIR__ . '/paths.php';


/* ═══════════════════════════════════════════════════════════════════════════
   STEP 2: LOAD SECURITY CONFIGURATION
   ═══════════════════════════════════════════════════════════════════════════ */

require_once CONFIG_PATH . '/security.php';


/* ═══════════════════════════════════════════════════════════════════════════
   STEP 3: LOAD DATABASE CONNECTION
   ═══════════════════════════════════════════════════════════════════════════ */

require_once CONFIG_PATH . '/db.php';


/* ═══════════════════════════════════════════════════════════════════════════
   STEP 4: INITIALIZE SECURITY (if not API request)
   ═══════════════════════════════════════════════════════════════════════════ */

// Initialize security for non-API requests
$isApiRequest = strpos($_SERVER['REQUEST_URI'] ?? '', '/api/') !== false;

if (!$isApiRequest && function_exists('initSecurity')) {
    initSecurity();
}
